<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===================== META & TITLE ===================== -->
  <meta charset="UTF-8" />
  <title>Sour D‚Äôoh! ‚Äì Sourdough Companion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta
    name="description"
    content="Sour D‚Äôoh! ‚Äì an all-in-one sourdough companion for starters, bake planning, journaling, and family recipes."
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <!-- ===================== END: META & TITLE ===================== -->

  <!-- ===================== BEGIN: BASE STYLES ===================== -->
  <style>
    :root {
      /* Color palette ‚Äì warm & cozy bakery */
      --bg-body: #f5eee6;
      --bg-card: #fff8f0;
      --bg-card-soft: #f9f1e7;
      --accent: #d98b4a;
      --accent-soft: rgba(217, 139, 74, 0.17);
      --accent-deep: #b76727;
      --text-main: #3a2a1b;
      --text-muted: #7a6551;
      --border-soft: rgba(102, 76, 51, 0.12);
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.08);
      --radius-lg: 18px;
      --radius-xl: 24px;
      --radius-pill: 999px;
      --transition-fast: 150ms ease-out;
      --transition-med: 220ms ease;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Nunito", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #fff8f0 0, #f0e2d4 40%, #e4d2c0 65%, #d3bba3 100%);
      color: var(--text-main);
    }

    body[data-mode="expert"] {
      background: radial-gradient(circle at top, #fff6ea 0, #f0e0c8 40%, #e0c39e 70%, #cda06c 100%);
    }

    a {
      color: var(--accent-deep);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* ===================== LAYOUT SHELL ===================== */

    #app-root {
      max-width: 1160px;
      margin: 0 auto;
      padding: 18px 14px 32px;
    }

    .app-shell {
      background: rgba(255, 248, 240, 0.97);
      border-radius: 26px;
      box-shadow: 0 26px 60px rgba(0, 0, 0, 0.18);
      border: 1px solid rgba(255, 255, 255, 0.7);
      overflow: hidden;
      backdrop-filter: blur(18px);
    }

    .app-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1.3rem 1.6rem 0.9rem;
      border-bottom: 1px solid rgba(102, 76, 51, 0.12);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 241, 231, 0.98));
    }

    .app-badge-icon {
      width: 46px;
      height: 46px;
      border-radius: 16px;
      background: radial-gradient(circle at 30% 30%, #fff4d7, #f1b45e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.7rem;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    }

    .app-title-block {
      flex: 1;
      min-width: 0;
    }

    .app-title {
      font-weight: 700;
      font-size: 1.4rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-main);
    }

    .app-subtitle {
      margin-top: 0.14rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .app-mode-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      padding: 0.25rem 0.5rem 0.25rem 0.35rem;
      border-radius: 999px;
      border: 1px solid rgba(102, 76, 51, 0.17);
      background: rgba(255, 252, 247, 0.9);
      font-size: 0.8rem;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .app-mode-select {
      border-radius: 999px;
      border: none;
      padding: 0.2rem 0.55rem;
      font-size: 0.8rem;
      background: #fceee0;
      color: var(--text-main);
      cursor: pointer;
    }

    .app-mode-select:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 1px;
    }

    /* ===================== NAVIGATION ===================== */

    .app-nav {
      display: flex;
      gap: 0.4rem;
      padding: 0.6rem 1.4rem 0.85rem;
      border-bottom: 1px solid rgba(102, 76, 51, 0.1);
      overflow-x: auto;
      scrollbar-width: thin;
    }

    .app-nav-button {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.3rem 0.75rem;
      border-radius: 999px;
      border: 1px solid transparent;
      background: transparent;
      cursor: pointer;
      font-size: 0.85rem;
      color: var(--text-muted);
      white-space: nowrap;
      transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast),
        transform var(--transition-fast);
    }

    .app-nav-button .emoji {
      font-size: 1.1rem;
    }

    .app-nav-button:hover {
      background: rgba(249, 241, 231, 0.9);
      border-color: rgba(102, 76, 51, 0.18);
      transform: translateY(-1px);
    }

    .app-nav-button.app-nav-active {
      background: radial-gradient(circle at top left, #ffe7c2, #f0c088);
      border-color: rgba(183, 118, 57, 0.7);
      color: #4a2d16;
      box-shadow: 0 12px 30px rgba(217, 139, 74, 0.35);
    }

    /* ===================== MAIN LAYOUT ===================== */

    .app-main {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.1fr);
      gap: 1.1rem;
      padding: 1rem 1.4rem 1.4rem;
    }

    .app-section {
      display: none;
    }

    .app-section.app-section-active {
      display: block;
    }

    .section-title-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.8rem;
      margin-bottom: 0.7rem;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 0.45rem;
      font-weight: 600;
      font-size: 1rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--text-main);
    }

    .section-title .emoji {
      font-size: 1.1rem;
    }

    .section-subtitle {
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 32rem;
    }

    .pill-label {
      align-self: center;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-deep);
      padding: 0.25rem 0.65rem;
      border-radius: 999px;
      background: rgba(217, 139, 74, 0.12);
      border: 1px solid rgba(217, 139, 74, 0.5);
      white-space: nowrap;
    }

    .app-secondary-column {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    /* ===================== CARDS & TYPOGRAPHY ===================== */

    .card {
      background: linear-gradient(145deg, var(--bg-card), #fffdf7);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-soft);
      padding: 0.75rem 0.85rem 0.8rem;
      margin-bottom: 0.8rem;
    }

    .card-soft {
      background: linear-gradient(145deg, var(--bg-card-soft), #fffaf3);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.35rem;
    }

    .card-header .tag {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      padding: 0.12rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(102, 76, 51, 0.18);
      background: rgba(249, 241, 231, 0.8);
      color: var(--text-muted);
      white-space: nowrap;
    }

    .card-body {
      font-size: 0.9rem;
      color: var(--text-main);
    }

    .card-footer {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
      margin-top: 0.55rem;
    }

    .muted-text {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .deep-science-block {
      margin-top: 0.6rem;
      border-radius: var(--radius-lg);
      padding: 0.6rem 0.7rem;
      background: radial-gradient(circle at top left, rgba(217, 139, 74, 0.12), rgba(255, 248, 240, 0.9));
      border: 1px dashed rgba(183, 118, 57, 0.55);
    }

    .deep-science-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
      cursor: pointer;
    }

    .deep-science-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: #4a2d16;
    }

    .deep-science-toggle-icon {
      font-size: 1rem;
    }

    .deep-science-body {
      font-size: 0.82rem;
      color: var(--text-muted);
      margin-top: 0.4rem;
      display: none;
    }

    .deep-science-body.open {
      display: block;
    }

    /* ===================== FORM ELEMENTS ===================== */

    .input-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.6rem;
      margin-bottom: 0.45rem;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.18rem;
    }

    .input-group label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }

    .input-group input,
    .input-group select,
    .input-group textarea {
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      padding: 0.38rem 0.5rem;
      font-size: 0.9rem;
      font-family: inherit;
      background: rgba(255, 252, 246, 0.96);
      color: var(--text-main);
    }

    .input-group textarea {
      min-height: 70px;
      resize: vertical;
    }

    .input-group input:focus-visible,
    .input-group select:focus-visible,
    .input-group textarea:focus-visible {
      outline: 2px solid rgba(217, 139, 74, 0.8);
      outline-offset: 1px;
      border-color: rgba(217, 139, 74, 0.8);
      background: #fffdf8;
    }

    /* Beginner/expert visibility */

    body[data-mode="beginner"] .expert-only {
      display: none !important;
    }

    body[data-mode="expert"] .beginner-only {
      display: none !important;
    }

    /* ===================== BUTTONS ===================== */

    .primary-btn,
    .soft-btn,
    .ghost-btn {
      border-radius: var(--radius-pill);
      padding: 0.4rem 0.85rem;
      font-size: 0.86rem;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      transition: background var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast),
        color var(--transition-fast);
    }

    .primary-btn {
      background: linear-gradient(135deg, #f3b56d, #d98b4a);
      color: #3b250f;
      box-shadow: 0 14px 34px rgba(217, 139, 74, 0.4);
    }

    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 40px rgba(217, 139, 74, 0.6);
    }

    .soft-btn {
      background: rgba(249, 241, 231, 0.96);
      color: var(--text-main);
      border: 1px solid rgba(102, 76, 51, 0.18);
    }

    .soft-btn:hover {
      background: rgba(249, 241, 231, 1);
    }

    .ghost-btn {
      background: transparent;
      color: var(--text-muted);
      padding-inline: 0.4rem;
    }

    .ghost-btn:hover {
      background: rgba(249, 241, 231, 0.8);
    }

    .btn-sm {
      padding: 0.25rem 0.6rem;
      font-size: 0.78rem;
    }

    /* ===================== LISTS (STARTERS, BAKES, JOURNAL) ===================== */

    .list-empty {
      font-size: 0.88rem;
      color: var(--text-muted);
      padding: 0.4rem 0.2rem;
    }

    .list-items {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    .list-item {
      padding: 0.4rem 0.5rem;
      border-radius: 12px;
      background: rgba(255, 252, 246, 0.95);
      border: 1px solid rgba(102, 76, 51, 0.12);
    }

    .list-item-header {
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .list-item-meta {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.1rem;
    }

    .list-item-body {
      font-size: 0.86rem;
      margin-top: 0.25rem;
    }

    
    .feed-history {
      margin-top: 0.35rem;
      font-size: 0.8rem;
    }

    .feed-history summary {
      cursor: pointer;
      font-weight: 500;
    }

    .feed-history-list {
      margin-top: 0.25rem;
      border-left: 2px solid rgba(102, 76, 51, 0.25);
      padding-left: 0.5rem;
    }

    .feed-history-item + .feed-history-item {
      margin-top: 0.3rem;
    }

    .feed-history-meta {
      color: var(--text-muted);
    }

    .feed-history-notes {
      margin-top: 0.1rem;
    }

    .feed-history-empty {
      margin-top: 0.25rem;
    }

/* ===================== FOOTER HINT ===================== */

    .app-footer {
      padding: 0.5rem 1.6rem 0.9rem;
      border-top: 1px solid rgba(102, 76, 51, 0.1);
      font-size: 0.78rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      background: linear-gradient(135deg, rgba(255, 252, 246, 0.96), rgba(249, 241, 231, 0.96));
    }

    .app-footer span {
      opacity: 0.9;
    }

    .app-footer strong {
      font-weight: 700;
      color: var(--accent-deep);
    }

    /* ===================== PRINT LAYOUT FOR STARTER LOG ===================== */

    @media print {
      body {
        background: #ffffff;
      }

      #app-root {
        padding: 0;
      }

      .app-shell {
        box-shadow: none;
        border-radius: 0;
        border: none;
      }

      .app-header,
      .app-nav,
      .app-main,
      .app-footer {
        display: none !important;
      }

      #section-starterLab {
        display: block !important;
      }

      #printStarterLog {
        display: block;
      }
    }

    #printStarterLog {
      display: none;
      padding: 0.4in 0.6in 0.6in;
      font-family: "Georgia", "Times New Roman", serif;
      color: #333;
    }

    #printStarterLog h1 {
      font-size: 1.3rem;
      margin: 0 0 0.1in;
      text-align: center;
    }

    #printStarterLog h2 {
      font-size: 1rem;
      margin: 0.02in 0 0.1in;
      text-align: center;
    }

    #printStarterLog p {
      font-size: 0.9rem;
      margin: 0 0 0.08in;
    }

    #printStarterLog table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.15in;
    }

    #printStarterLog th,
    #printStarterLog td {
      border: 1px solid #555;
      padding: 0.15in 0.1in;
      font-size: 0.85rem;
    }

    #printStarterLog th {
      background: #f0f0f0;
      text-align: left;
    }
  
    /* ===================== BEGIN: PLANNER SCHEDULE TOOLTIP ===================== */
    .schedule-grid {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .schedule-row {
      display: grid;
      grid-template-columns: minmax(0, 120px) minmax(0, 1fr);
      gap: 0.5rem;
      align-items: flex-start;
    }

    .schedule-time {
      font-weight: 600;
      color: var(--text-muted);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .schedule-label {
      font-weight: 600;
      cursor: help;
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      border-bottom: 1px dotted rgba(58, 42, 27, 0.6);
    }

    .schedule-label::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 0;
      top: 120%;
      transform: translateY(4px);
      min-width: 220px;
      max-width: min(360px, 80vw);
      padding: 0.5rem 0.6rem;
      border-radius: 8px;
      background: rgba(32, 21, 12, 0.98);
      border: 1px solid rgba(217, 139, 74, 0.55);
      color: #fff8f0;
      font-size: 0.75rem;
      line-height: 1.45;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
      opacity: 0;
      pointer-events: none;
      z-index: 40;
      transition: opacity 0.12s ease, transform 0.12s ease;
      white-space: normal;
    }

    .schedule-label::before {
      content: "";
      position: absolute;
      left: 12px;
      top: 115%;
      border-width: 6px;
      border-style: solid;
      border-color: rgba(217, 139, 74, 0.55) transparent transparent transparent;
      opacity: 0;
      transition: opacity 0.12s ease;
    }

    .schedule-label:hover::after,
    .schedule-label:focus-visible::after {
      opacity: 1;
      transform: translateY(0);
    }

    .schedule-label:hover::before,
    .schedule-label:focus-visible::before {
      opacity: 1;
    }

    .schedule-detail {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 0.1rem;
    }

    @media (max-width: 640px) {
      .schedule-row {
        grid-template-columns: minmax(0, 1fr);
      }
      .schedule-time {
        margin-bottom: 0.1rem;
      }
    }
    /* ===================== END: PLANNER SCHEDULE TOOLTIP ===================== */

    /* ===================== RESPONSIVE ===================== */

    @media (max-width: 880px) {
      .app-main {
        grid-template-columns: minmax(0, 1fr);
      }

      .app-header {
        flex-wrap: wrap;
      }

      .app-mode-pill {
        margin-left: auto;
      }
    }

    @media (max-width: 640px) {
      .app-header {
        padding-inline: 1.1rem;
      }

      .app-nav {
        padding-inline: 1.1rem;
      }

      .app-main {
        padding-inline: 1.1rem;
      }

      .input-row {
        grid-template-columns: minmax(0, 1fr);
      }

      .section-title-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .app-footer {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body data-mode="beginner" data-units="metric">
  <div id="app-root">
    <div class="app-shell">
      <!-- ===================== BEGIN: HEADER ===================== -->
      <header class="app-header">
        <div class="app-badge-icon" aria-hidden="true">ü•ñ</div>
        <div class="app-title-block">
          <div class="app-title">Sour D‚Äôoh!</div>
          <div class="app-subtitle">A cozy, scientific companion for your sourdough journey.</div>
        </div>
        <div class="app-mode-pill">
          Mode:
          <select id="modeSelect" class="app-mode-select" aria-label="Experience mode">
            <option value="beginner">Beginner</option>
            <option value="expert">Expert</option>
          </select>
        </div>
      </header>
      <!-- ===================== END: HEADER ===================== -->

      <!-- ===================== BEGIN: NAVIGATION ===================== -->
      <nav class="app-nav" aria-label="Main navigation">
        <button class="app-nav-button app-nav-active" data-section="home">
          <span class="emoji">üè†</span>
          <span>Home</span>
        </button>
        <button class="app-nav-button" data-section="starterLab">
          <span class="emoji">ü´ô</span>
          <span>Starter Lab</span>
        </button>
        <button class="app-nav-button" data-section="planner">
          <span class="emoji">üßÆ</span>
          <span>Planner</span>
        </button>
        <button class="app-nav-button" data-section="bakes">
          <span class="emoji">üìä</span>
          <span>Bakes</span>
        </button>
        <button class="app-nav-button" data-section="learn">
          <span class="emoji">üìö</span>
          <span>Learn</span>
        </button>
        <button class="app-nav-button" data-section="journal">
          <span class="emoji">üìù</span>
          <span>Journal</span>
        </button>
        <button class="app-nav-button" data-section="family">
          <span class="emoji">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
          <span>Family recipes</span>
        </button>
        <button class="app-nav-button" data-section="settings">
          <span class="emoji">‚öôÔ∏è</span>
          <span>Settings</span>
        </button>
      </nav>
      <!-- ===================== END: NAVIGATION ===================== -->

      <!-- ===================== BEGIN: MAIN CONTENT ===================== -->
      <main class="app-main">
        <!-- LEFT COLUMN -->
        <section id="section-home" class="app-section app-section-active" aria-labelledby="home-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="home-title" class="section-title">
                  <span class="emoji">üè†</span>
                  <span>Welcome to Sour D‚Äôoh!</span>
                </div>
                <div class="section-subtitle">
                  Whether this is your first starter or your 300th loaf, this space keeps your notes, timings, and
                  ‚Äúoh THAT‚ÄôS what went wrong‚Äù moments in one cozy place.
                </div>
              </div>
              <div class="pill-label">Prototype ‚Äì local only</div>
            </div>

            <div class="card card-soft">
              <div class="card-header">
                How to use this prototype
                <span class="tag">Beginner &amp; expert friendly</span>
              </div>
              <div class="card-body">
                <ul class="muted-text">
                  <li>
                    <strong>Starter Lab:</strong> Create profiles for each starter, log feedings, and print a paper log
                    if you‚Äôre elbow-deep in dough.
                  </li>
                  <li>
                    <strong>Planner:</strong> Enter your target dough weight, hydration, and room temp, then let the
                    app suggest a timeline with hover tips for each step.
                  </li>
                  <li>
                    <strong>Bakes:</strong> Log each bake with fermentation, bake details, and your scoring.
                  </li>
                  <li>
                    <strong>Learn &amp; Journal:</strong> Save ‚Äúaha‚Äù moments, troubleshoot flops, and stash notes you‚Äôll
                    actually find again.
                  </li>
                </ul>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                Beginner vs. expert mode
                <span class="tag">Mode hint</span>
              </div>
              <div class="card-body">
                <p id="modeHint" class="muted-text">
                  Beginner mode: we‚Äôll keep things gentle, guide step-by-step, and tuck the nerdy bits behind ‚ÄúDeep
                  Science‚Äù panels.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- STARTER LAB -->
        <section id="section-starterLab" class="app-section" aria-labelledby="starterLab-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="starterLab-title" class="section-title">
                  <span class="emoji">ü´ô</span>
                  <span>Starter Lab</span>
                </div>
                <div class="section-subtitle">
                  Track each starter like a tiny, bubbly pet with its own habits, history, and flavor.
                </div>
              </div>
              <div class="pill-label">Multiple starters supported</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              New starter profile
              <span class="tag">Metadata</span>
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label for="starterName">Starter name</label>
                  <input id="starterName" type="text" placeholder="House starter, Rye beast, etc." />
                </div>
                <div class="input-group">
                  <label for="starterHydration">Hydration (%)</label>
                  <input id="starterHydration" type="number" min="50" max="125" step="1" placeholder="100" />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="starterFlour">Primary flour mix</label>
                  <input id="starterFlour" type="text" placeholder="All-purpose, bread, 70/30 bread/whole wheat‚Ä¶" />
                </div>
                <div class="input-group">
                  <label for="starterOrigin">Origin date</label>
                  <input id="starterOrigin" type="date" />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="starterNotes">Notes</label>
                  <textarea
                    id="starterNotes"
                    placeholder="Where did it come from? What does it smell like? Any special feeding schedule?"
                  ></textarea>
                </div>
              </div>
              <p class="muted-text">
                This now saves into your browser as a reusable starter profile. You can add as many as you like.
              </p>
            </div>
            <div class="card-footer">
              <button class="primary-btn" id="starterSaveBtn">
                <span>üíæ Save starter</span>
              </button>
              <button class="soft-btn beginner-only" id="starterExpectationsBtn">
                <span>üëÄ What to expect (new starter)</span>
              </button>
            </div>
          </div>

          <div class="card hidden" id="starterExpectationsCard">
            <div class="card-header">
              What to expect from a brand new starter
              <span class="tag">Beginner comfort</span>
            </div>
            <div class="card-body">
              <p class="muted-text">
                Every starter is different, but here‚Äôs a rough idea of what most people see in the first week if they‚Äôre
                feeding equal parts flour and water at room temperature.
              </p>
              <ul class="muted-text">
                <li><strong>Day 1‚Äì2:</strong> It may look lively quickly, then stall. Totally normal.</li>
                <li><strong>Day 3‚Äì4:</strong> It might smell funky (cheese, socks, vinegar). Still normal.</li>
                <li>
                  <strong>Day 5‚Äì7:</strong> Once it reliably doubles between feedings, you‚Äôre getting close to a usable
                  starter.
                </li>
                <li>
                  <strong>Hooch (liquid on top):</strong> a sign it‚Äôs hungry. Pour it off or stir it back in, then feed.
                </li>
              </ul>
              <p class="muted-text">
                The key: <strong>consistency over perfection.</strong> Stick to a schedule and write down what you see.
              </p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              Saved starters
            </div>
            <div class="card-body" id="starterList">
              <div class="list-empty">No starters yet. Create one above to see it here.</div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              Log a feeding
              <span class="tag">Connected to a starter</span>
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label for="feedStarterSelect">Which starter?</label>
                  <select id="feedStarterSelect">
                    <option value="">No starters yet</option>
                  </select>
                </div>
                <div class="input-group">
                  <label for="feedRatio">Feed ratio (starter : flour : water)</label>
                  <input id="feedRatio" type="text" placeholder="1 : 2 : 2" />
                </div>
                <div class="input-group">
                  <label for="feedTemp">Room temp (¬∞C)</label>
                  <input id="feedTemp" type="number" step="0.1" placeholder="23" />
                </div>
                <div class="input-group">
                  <label for="feedPeakTime">Time to peak (hours)</label>
                  <input id="feedPeakTime" type="number" step="0.1" placeholder="4.5" />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="feedNotes">Feed notes - include information regarding your discard here.</label>
                  <textarea
                    id="feedNotes"
                    placeholder="Bubbly? Domed? Any hooch? Smell more acidic or sweet?"
                  ></textarea>
                </div>
              </div>
              <p class="muted-text">
                Each feeding you save is stored under the chosen starter. Later we can visualize activity over time.
              </p>

              <div class="deep-science-block" id="starterDeepScience">
                <div class="deep-science-header">
                  <div class="deep-science-title">
                    <span>üß™ Deep Science: What‚Äôs happening after a feeding?</span>
                  </div>
                  <div class="deep-science-toggle-icon" aria-hidden="true">‚ñº</div>
                </div>
                <div class="deep-science-body">
                  <p>
                    After you feed, wild yeasts and lactic acid bacteria wake up and start chewing through sugars. The
                    ratio of flour, water, temperature, and time all affect which microbes ‚Äúwin‚Äù and how sour or mild
                    your starter becomes.
                  </p>
                  <ul>
                    <li>Warmer temps favor faster activity but can push things more sour.</li>
                    <li>Cooler temps slow everything down but can build complexity.</li>
                    <li>Higher feed ratios (like 1:5:5) give a longer, slower rise.</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button class="primary-btn" id="feedSaveBtn">
                <span>üì• Save feeding</span>
              </button>
              <button class="soft-btn" id="printStarterLogBtn">
                <span>üñ®Ô∏è Print blank log sheet</span>
              </button>
            </div>
          </div>
        </section>

        <!-- BAKES: PRINT-STYLE STARTER LOG (PRINT ONLY) -->
        <section id="printStarterLog">
          <h1>Sour D‚Äôoh! ‚Äì Starter Log</h1>
          <h2>Starter name: ____________________________</h2>
          <p>
            Use this sheet at the counter, then transfer the info back into the app when your hands aren‚Äôt covered in
            flour.
          </p>

          <h2>Starter profile</h2>
          <table>
            <tr>
              <th style="width:1.4in;">Hydration (%)</th>
              <td></td>
            </tr>
            <tr>
              <th>Flour blend</th>
              <td></td>
            </tr>
            <tr>
              <th>Usual room temp (¬∞C/¬∞F)</th>
              <td></td>
            </tr>
            <tr>
              <th>Typical feeding ratio</th>
              <td></td>
            </tr>
            <tr>
              <th>Notes</th>
              <td></td>
            </tr>
          </table>

          <h2>Feeding log</h2>
          <table>
            <thead>
              <tr>
                <th style="width:0.9in;">Date</th>
                <th style="width:0.9in;">Time</th>
                <th>Feed ratio<br />(starter : flour : water)</th>
                <th>Room temp<br />(¬∞C or ¬∞F)</th>
                <th>Time to peak<br />(hours)</th>
                <th>Notes (bubbles, smell, hooch, etc.)</th>
              </tr>
            </thead>
            <tbody>
              <!-- A few blank rows for handwriting -->
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- PLANNER -->
        <section id="section-planner" class="app-section" aria-labelledby="planner-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="planner-title" class="section-title">
                  <span class="emoji">üßÆ</span>
                  <span>Bake Planner</span>
                </div>
                <div class="section-subtitle">
                  Define your flour mix, hydration, and schedule. Let the app help you hit your bake window.
                </div>
              </div>
              <div class="pill-label">Formula &amp; timeline</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              Dough formula
              <span class="tag">Inputs</span>
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label for="targetWeight">Target dough weight (<span data-units-label="weight">g</span>)</label>
                  <input id="targetWeight" type="number" min="300" max="3000" step="10" placeholder="900" />
                </div>
                <div class="input-group">
                  <label for="hydration">Hydration (%)</label>
                  <input id="hydration" type="number" min="55" max="90" step="1" placeholder="75" />
                </div>
                <div class="input-group">
                  <label for="saltPercent">Salt (%)</label>
                  <input id="saltPercent" type="number" min="1.5" max="3" step="0.1" placeholder="2.0" />
                </div>
                <div class="input-group expert-only">
                  <label for="levainPercent">Levain (% of flour)</label>
                  <input id="levainPercent" type="number" min="5" max="40" step="1" placeholder="20" />
                </div>
              </div>

              <div class="input-row">
                <div class="input-group">
                  <label for="flourBlend">Flour blend</label>
                  <input id="flourBlend" type="text" placeholder="70% bread, 20% AP, 10% whole wheat" />
                </div>
                <div class="input-group">
                  <label for="ambientTemp">Room temperature (<span data-units-label="temp">¬∞C</span>)</label>
                  <input id="ambientTemp" type="number" step="0.1" placeholder="23.0" />
                </div>
              </div>

              <p class="muted-text">
                These inputs drive a mock formula and schedule now. Later we can tie them to your real bake history.
              </p>
            </div>
            <div class="card-footer">
              <button class="primary-btn" id="calculateFormulaBtn">
                <span>üßæ Calculate formula (mock)</span>
              </button>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              Suggested schedule
              <span class="tag">Preview</span>
            </div>
            <div class="card-body" id="schedulePreview">
              Enter a target weight, hydration, and room temperature above, then click
              <strong>Calculate formula</strong>. This area will show a rough timeline with hover tips for each step.
            </div>
          </div>
        </section>

        <!-- BAKES -->
        <section id="section-bakes" class="app-section" aria-labelledby="bakes-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="bakes-title" class="section-title">
                  <span class="emoji">üìä</span>
                  <span>Bake Log &amp; Analytics</span>
                </div>
                <div class="section-subtitle">
                  Log every loaf with full details: formula, fermentation, bake, and evaluation.
                </div>
              </div>
              <div class="pill-label">Prototype ‚Äì unlimited bakes (saved in this browser)</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              New bake entry
              <span class="tag">Session</span>
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeName">Bake name</label>
                  <input id="bakeName" type="text" placeholder="House boule, sandwich loaf, pizza test, etc." />
                </div>
                <div class="input-group">
                  <label for="bakeDate">Date</label>
                  <input id="bakeDate" type="date" />
                </div>
                <div class="input-group">
                  <label for="bakeStarterSelect">Starter used (optional)</label>
                  <select id="bakeStarterSelect">
                    <option value="">No specific starter</option>
                  </select>
                </div>
              </div>

              <!-- Formula -->
              <div class="muted-text" style="margin-top:0.6rem; font-weight:600;">
                Formula &amp; dough
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeDoughWeight">Dough weight (<span data-units-label="weight">g</span>)</label>
                  <input id="bakeDoughWeight" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeHydration">Hydration (%)</label>
                  <input id="bakeHydration" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeSaltPercent">Salt (%)</label>
                  <input id="bakeSaltPercent" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeLevainPercent">Levain (% of flour)</label>
                  <input id="bakeLevainPercent" type="number" />
                </div>
              </div>

              <!-- Fermentation -->
              <div class="muted-text" style="margin-top:0.6rem; font-weight:600;">
                Fermentation
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeAmbientTemp">Ambient temp (¬∞C)</label>
                  <input id="bakeAmbientTemp" type="number" step="0.1" />
                </div>
                <div class="input-group">
                  <label for="bakeBulkHours">Bulk ferment (hours)</label>
                  <input id="bakeBulkHours" type="number" step="0.1" />
                </div>
                <div class="input-group">
                  <label for="bakeFolds">Number of folds</label>
                  <input id="bakeFolds" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeFoldMethod">Fold style</label>
                  <select id="bakeFoldMethod">
                    <option value="coil">Coil folds</option>
                    <option value="stretch">Stretch &amp; fold</option>
                    <option value="slap">Slap &amp; fold</option>
                    <option value="none">None</option>
                  </select>
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeBulkNotes">Bulk notes</label>
                  <textarea
                    id="bakeBulkNotes"
                    placeholder="How high did it rise? Bubbles? Smooth or weak? Any pauses?"
                  ></textarea>
                </div>
              </div>

              <!-- Proof & bake -->
              <div class="muted-text" style="margin-top:0.6rem; font-weight:600;">
                Proof &amp; bake
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeProofMethod">Proof method</label>
                  <select id="bakeProofMethod">
                    <option value="cold">Cold retard (fridge)</option>
                    <option value="room">Room temp</option>
                    <option value="combo">Room, then cold</option>
                  </select>
                </div>
                <div class="input-group">
                  <label for="bakeProofHours">Proof time (hours)</label>
                  <input id="bakeProofHours" type="number" step="0.1" />
                </div>
                <div class="input-group">
                  <label for="bakeProofTemp">Proof temp (¬∞C)</label>
                  <input id="bakeProofTemp" type="number" step="0.1" />
                </div>
                <div class="input-group">
                  <label for="bakeVessel">Baking vessel</label>
                  <select id="bakeVessel">
                    <option value="dutch">Dutch oven</option>
                    <option value="stone">Baking stone/steel</option>
                    <option value="pan">Loaf pan</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakePreheatTemp">Preheat temp (¬∞C)</label>
                  <input id="bakePreheatTemp" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeBakeTemp">Bake temp (¬∞C)</label>
                  <input id="bakeBakeTemp" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeCoveredMinutes">Minutes covered</label>
                  <input id="bakeCoveredMinutes" type="number" />
                </div>
                <div class="input-group">
                  <label for="bakeUncoveredMinutes">Minutes uncovered</label>
                  <input id="bakeUncoveredMinutes" type="number" />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeSteamMethod">Steam method</label>
                  <input
                    id="bakeSteamMethod"
                    type="text"
                    placeholder="Lid on/off, tray of water, ice cubes in pan, etc."
                  />
                </div>
                <div class="input-group">
                  <label for="bakeBakeNotes">Bake notes</label>
                  <textarea
                    id="bakeBakeNotes"
                    placeholder="Color, blistering, ears, how it smelled, anything that surprised you."
                  ></textarea>
                </div>
              </div>

              <!-- Evaluation -->
              <div class="muted-text" style="margin-top:0.6rem; font-weight:600;">
                Evaluation
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeCrumb">Crumb (1‚Äì5)</label>
                  <input id="bakeCrumb" type="number" min="1" max="5" />
                </div>
                <div class="input-group">
                  <label for="bakeCrust">Crust (1‚Äì5)</label>
                  <input id="bakeCrust" type="number" min="1" max="5" />
                </div>
                <div class="input-group">
                  <label for="bakeSourness">Sourness (1‚Äì5)</label>
                  <input id="bakeSourness" type="number" min="1" max="5" />
                </div>
                <div class="input-group">
                  <label for="bakeOverall">Overall happiness (1‚Äì5)</label>
                  <input id="bakeOverall" type="number" min="1" max="5" />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="bakeNotes">Tasting notes</label>
                  <textarea
                    id="bakeNotes"
                    placeholder="Where did this shine? What would you tweak next time?"
                  ></textarea>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button class="primary-btn" id="bakeSaveBtn">
                <span>üíæ Save bake</span>
              </button>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              Saved bakes
            </div>
            <div class="card-body">
              <div id="bakeList" class="list-empty">
                No bakes saved yet. Log one above to start your history.
              </div>
            </div>
          </div>
        </section>

        <!-- LEARN -->
        <section id="section-learn" class="app-section" aria-labelledby="learn-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="learn-title" class="section-title">
                  <span class="emoji">üìö</span>
                  <span>Learn &amp; troubleshoot</span>
                </div>
                <div class="section-subtitle">
                  Quick, friendly explanations of the weird stuff that happens between flour, water, and time.
                </div>
              </div>
              <div class="pill-label">Evergreen notes</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              Common issues
              <span class="tag">Beginner-friendly</span>
            </div>
            <div class="card-body">
              <ul class="muted-text">
                <li>
                  <strong>Flat loaf:</strong> Under-fermented, over-proofed, weak shaping, or too low an oven temp are
                  the usual suspects.
                </li>
                <li>
                  <strong>Gummy crumb:</strong> Often under-baked, or cut too soon. Let it cool fully before slicing.
                </li>
                <li>
                  <strong>Too sour:</strong> Long, warm ferments or very old starter. Shorten bulk or use cooler temps.
                </li>
                <li>
                  <strong>Not sour enough:</strong> Increase cold proof time or use a more mature starter.
                </li>
              </ul>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              Glossary
              <span class="tag">Plain language</span>
            </div>
            <div class="card-body">
              <ul class="muted-text">
                <li>
                  <strong>Autolyse:</strong> A rest with just flour and water to start gluten formation with little
                  effort.
                </li>
                <li>
                  <strong>Bulk ferment:</strong> The first rise after mixing everything together.
                </li>
                <li>
                  <strong>Proof:</strong> The final rise after shaping, right before baking.
                </li>
              </ul>
            </div>
          </div>
        </section>

        <!-- JOURNAL -->
        <section id="section-journal" class="app-section" aria-labelledby="journal-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="journal-title" class="section-title">
                  <span class="emoji">üìù</span>
                  <span>Bake journal</span>
                </div>
                <div class="section-subtitle">
                  Capture stories, experiments, and ‚Äúnever again‚Äù moments that don‚Äôt fit neatly into a form.
                </div>
              </div>
              <div class="pill-label">Free-form notes</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              New journal entry
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label for="journalTitle">Title</label>
                  <input id="journalTitle" type="text" placeholder="That time the loaf welded to the Dutch oven" />
                </div>
                <div class="input-group">
                  <label for="journalDate">Date</label>
                  <input id="journalDate" type="date" />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="journalStory">Story</label>
                  <textarea
                    id="journalStory"
                    placeholder="What happened? What did you learn? What would you change?"
                  ></textarea>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button class="primary-btn" id="journalSaveBtn">
                <span>üíæ Save entry</span>
              </button>
            </div>
          </div>

          <div class="card">
            <div class="card-header">Saved journal entries</div>
            <div class="card-body">
              <div id="journalList" class="list-empty">No entries yet. Start by saving one above.</div>
            </div>
          </div>
        </section>

        <!-- FAMILY RECIPES -->
        <section id="section-family" class="app-section" aria-labelledby="family-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="family-title" class="section-title">
                  <span class="emoji">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                  <span>Family recipes</span>
                </div>
                <div class="section-subtitle">
                  Keep heirloom formulas, ‚ÄúGrandma‚Äôs notes,‚Äù and favorite variations in one safe, sharable place.
                </div>
              </div>
              <div class="pill-label">Heirloom stash</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              New family recipe
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label for="familyTitle">Recipe name</label>
                  <input id="familyTitle" type="text" placeholder="Grandma‚Äôs Sunday sourdough" />
                </div>
                <div class="input-group">
                  <label for="familyAttribution">Who does this belong to?</label>
                  <input id="familyAttribution" type="text" placeholder="Grandma, Aunt, neighborhood baker, etc." />
                </div>
              </div>
              <div class="input-row">
                <div class="input-group">
                  <label for="familyStory">Story / notes</label>
                  <textarea
                    id="familyStory"
                    placeholder="When is it usually made? Any quirks or superstitions?"
                  ></textarea>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button class="primary-btn" id="familySaveBtn">
                <span>üíæ Save recipe</span>
              </button>
            </div>
          </div>

          <div class="card">
            <div class="card-header">Saved family recipes</div>
            <div class="card-body">
              <div id="familyList" class="list-empty">
                No recipes saved yet. Add one above to pin it in place.
              </div>
            </div>
          </div>
        </section>

                <!-- SETTINGS -->
        <section id="section-settings" class="app-section" aria-labelledby="settings-title">
          <div>
            <div class="section-title-row">
              <div>
                <div id="settings-title" class="section-title">
                  <span class="emoji">‚öôÔ∏è</span>
                  <span>Settings &amp; tools</span>
                </div>
                <div class="section-subtitle">
                  Tweak how the app behaves and use quick converters when you‚Äôre juggling recipes from different sources.
                </div>
              </div>
              <div class="pill-label">Local prototype</div>
            </div>
          </div>

          <div class="card card-soft">
            <div class="card-header">
              Experience mode
              <span class="tag">Beginner vs. expert</span>
            </div>
            <div class="card-body">
              <p class="muted-text" id="settingsModeSummary">
                Beginner mode keeps the language gentle and hides some of the nerdier details until you‚Äôre ready.
              </p>
              <p class="muted-text">
                Use the mode selector in the header to switch between <strong>Beginner</strong> and
                <strong>Expert</strong>. Expert mode surfaces more numbers, less hand-holding, and extra ‚ÄúDeep Science‚Äù
                notes.
              </p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              Units &amp; quick converters
              <span class="tag">Metric / imperial</span>
            </div>
            <div class="card-body">
              <div class="input-row">
                <div class="input-group">
                  <label>Preferred units</label>
                  <div style="display:flex; gap:0.6rem; font-size:0.86rem; margin-top:0.1rem;">
                    <label>
                      <input type="radio" name="units" id="unitsMetric" value="metric" checked />
                      Metric (g, ¬∞C)
                    </label>
                    <label>
                      <input type="radio" name="units" id="unitsImperial" value="imperial" />
                      Imperial (oz, ¬∞F)
                    </label>
                  </div>
                  <p class="muted-text" style="margin-top:0.35rem;">
                    This changes labels and defaults in the planner and bake log. It doesn‚Äôt retro-convert older entries
                    yet.
                  </p>
                </div>
              </div>

              <div class="input-row">
                <div class="input-group">
                  <label for="convertWeightInput">Weight converter</label>
                  <input id="convertWeightInput" type="number" placeholder="e.g. 500" />
                  <select id="convertWeightDirection" style="margin-top:0.25rem; max-width:180px;">
                    <option value="g-to-oz">Grams ‚Üí Ounces</option>
                    <option value="oz-to-g">Ounces ‚Üí Grams</option>
                  </select>
                  <div id="convertWeightResult" class="muted-text" style="margin-top:0.25rem;"></div>
                </div>

                <div class="input-group">
                  <label for="convertTempInput">Temperature converter</label>
                  <input id="convertTempInput" type="number" placeholder="e.g. 450" />
                  <select id="convertTempDirection" style="margin-top:0.25rem; max-width:180px;">
                    <option value="c-to-f">¬∞C ‚Üí ¬∞F</option>
                    <option value="f-to-c">¬∞F ‚Üí ¬∞C</option>
                  </select>
                  <div id="convertTempResult" class="muted-text" style="margin-top:0.25rem;"></div>
                </div>
              </div>

              <p class="muted-text">
                These are just quick tools so you don‚Äôt have to leave the page when a recipe is in the ‚Äúwrong‚Äù units.
              </p>
            </div>
          </div>
        </section>
      </main>

      <!-- ===================== BEGIN: FOOTER ===================== -->
      <footer class="app-footer">
        <span>
          <strong>Data note:</strong> Everything you enter here is stored only in this browser for now. Clearing browser
          storage will wipe it.
        </span>
        <span>Sour D‚Äôoh! prototype &middot; v1 ‚Äì educational &amp; utility demo</span>
      </footer>
      <!-- ===================== END: FOOTER ===================== -->
    </div>
  </div>

  <!-- ===================== BEGIN: APP SCRIPT ===================== -->
  <script>
    (function () {
      "use strict";

      // ---------- Storage helpers ----------
      const STORAGE_KEYS = {
        mode: "sourdoh.mode",
        units: "sourdoh.units",
        starters: "sourdoh.starters",
        feeds: "sourdoh.feeds",
        bakes: "sourdoh.bakes",
        journal: "sourdoh.journal",
        family: "sourdoh.family",
      };

      function loadJSON(key, fallback) {
        try {
          const raw = window.localStorage.getItem(key);
          if (!raw) return fallback;
          return JSON.parse(raw);
        } catch (e) {
          return fallback;
        }
      }

      function saveJSON(key, value) {
        try {
          window.localStorage.setItem(key, JSON.stringify(value));
        } catch (e) {
          // ignore quota / private mode errors for prototype
        }
      }

      function escapeHtml(str) {
        if (str === undefined || str === null) return "";
        return String(str).replace(/[&<>"']/g, function (c) {
          return { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[c] || c;
        });
      }

      function escapeAttr(str) {
        return escapeHtml(str).replace(/"/g, "&quot;");
      }

      const bodyEl = document.body;

      // ---------- Navigation ----------
      const navButtons = document.querySelectorAll(".app-nav-button");
      const sections = document.querySelectorAll(".app-section");

      function showSection(sectionName) {
        const targetId = "section-" + sectionName;
        sections.forEach((sec) => {
          if (sec.id === targetId) {
            sec.classList.add("app-section-active");
          } else {
            sec.classList.remove("app-section-active");
          }
        });
      }

      navButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const section = btn.getAttribute("data-section");
          navButtons.forEach((b) => b.classList.toggle("app-nav-active", b === btn));
          showSection(section);
        });
      });

      // ---------- Mode handling (Beginner / Expert) ----------
      const modeSelect = document.getElementById("modeSelect");
      const modeHint = document.getElementById("modeHint");
      const settingsModeSummary = document.getElementById("settingsModeSummary");

      const MODE_DESCRIPTIONS = {
        beginner: {
          home:
            "Beginner mode: we‚Äôll keep things gentle, guide step-by-step, and tuck the nerdy bits behind ‚ÄúDeep Science‚Äù panels.",
          settings:
            "Beginner mode focuses on clear explanations and fewer distractions. You‚Äôll see more guidance and fewer advanced knobs.",
        },
        expert: {
          home:
            "Expert mode: we assume you‚Äôve baked a few loaves. Expect more numbers, less hand-holding, and quick access to the deeper science.",
          settings:
            "Expert mode prioritizes speed and detail over explanation. Great if you‚Äôre optimizing formulas or comparing multiple bakes.",
        },
      };

      function applyMode(mode) {
        const m = mode === "expert" ? "expert" : "beginner";
        bodyEl.setAttribute("data-mode", m);
        if (modeSelect) modeSelect.value = m;
        if (modeHint && MODE_DESCRIPTIONS[m]) modeHint.textContent = MODE_DESCRIPTIONS[m].home;
        if (settingsModeSummary && MODE_DESCRIPTIONS[m]) {
          settingsModeSummary.textContent = MODE_DESCRIPTIONS[m].settings;
        }
        saveJSON(STORAGE_KEYS.mode, m);
      }

      const storedMode = loadJSON(STORAGE_KEYS.mode, null);
      applyMode(storedMode || "beginner");

      if (modeSelect) {
        modeSelect.addEventListener("change", (e) => {
          applyMode(e.target.value);
        });
      }

      // ---------- Units & converters ----------
      const unitsMetric = document.getElementById("unitsMetric");
      const unitsImperial = document.getElementById("unitsImperial");
      const weightLabels = document.querySelectorAll('[data-units-label="weight"]');
      const tempLabels = document.querySelectorAll('[data-units-label="temp"]');

      function applyUnits(units) {
        const u = units === "imperial" ? "imperial" : "metric";
        bodyEl.setAttribute("data-units", u);

        if (unitsMetric) unitsMetric.checked = u === "metric";
        if (unitsImperial) unitsImperial.checked = u === "imperial";

        weightLabels.forEach((el) => {
          el.textContent = u === "imperial" ? "oz" : "g";
        });
        tempLabels.forEach((el) => {
          el.textContent = u === "imperial" ? "¬∞F" : "¬∞C";
        });

        saveJSON(STORAGE_KEYS.units, u);
      }

      const storedUnits = loadJSON(STORAGE_KEYS.units, null);
      applyUnits(storedUnits || "metric");

      if (unitsMetric) {
        unitsMetric.addEventListener("change", () => applyUnits("metric"));
      }
      if (unitsImperial) {
        unitsImperial.addEventListener("change", () => applyUnits("imperial"));
      }

      // Converters
      const convertWeightInput = document.getElementById("convertWeightInput");
      const convertWeightDirection = document.getElementById("convertWeightDirection");
      const convertWeightResult = document.getElementById("convertWeightResult");
      const convertTempInput = document.getElementById("convertTempInput");
      const convertTempDirection = document.getElementById("convertTempDirection");
      const convertTempResult = document.getElementById("convertTempResult");

      function updateWeightConversion() {
        if (!convertWeightInput || !convertWeightDirection || !convertWeightResult) return;
        const val = parseFloat(convertWeightInput.value);
        if (!val && val !== 0) {
          convertWeightResult.textContent = "";
          return;
        }
        const dir = convertWeightDirection.value;
        let out = "";
        if (dir === "g-to-oz") {
          out = (val / 28.3495).toFixed(2) + " oz";
        } else {
          out = (val * 28.3495).toFixed(0) + " g";
        }
        convertWeightResult.textContent = out;
      }

      function updateTempConversion() {
        if (!convertTempInput || !convertTempDirection || !convertTempResult) return;
        const val = parseFloat(convertTempInput.value);
        if (!val && val !== 0) {
          convertTempResult.textContent = "";
          return;
        }
        const dir = convertTempDirection.value;
        let out = "";
        if (dir === "c-to-f") {
          out = ((val * 9) / 5 + 32).toFixed(1) + " ¬∞F";
        } else {
          out = (((val - 32) * 5) / 9).toFixed(1) + " ¬∞C";
        }
        convertTempResult.textContent = out;
      }

      if (convertWeightInput) {
        convertWeightInput.addEventListener("input", updateWeightConversion);
        convertWeightDirection.addEventListener("change", updateWeightConversion);
      }
      if (convertTempInput) {
        convertTempInput.addEventListener("input", updateTempConversion);
        convertTempDirection.addEventListener("change", updateTempConversion);
      }

      // ---------- Starter Lab ----------
      let starters = loadJSON(STORAGE_KEYS.starters, []);
      let feeds = loadJSON(STORAGE_KEYS.feeds, []);

      const starterListEl = document.getElementById("starterList");
      const feedStarterSelect = document.getElementById("feedStarterSelect");
      const bakeStarterSelect = document.getElementById("bakeStarterSelect");

      // ===== BEGIN: STARTER LAB ‚Äì starter inputs =====
      const starterNameInput = document.getElementById("starterName");
      const starterHydrationInput = document.getElementById("starterHydration");
      const starterFlourInput = document.getElementById("starterFlour");
      const starterOriginInput = document.getElementById("starterOrigin");
      const starterNotesInput = document.getElementById("starterNotes");
      const starterSaveBtn = document.getElementById("starterSaveBtn");

      // Auto-populate origin date with today by default (for new starters)
      if (starterOriginInput && !starterOriginInput.value) {
        const today = new Date();
        const iso = today.toISOString().slice(0, 10); // YYYY-MM-DD
        starterOriginInput.value = iso;
      }
      // ===== END: STARTER LAB ‚Äì starter inputs =====

      const starterExpectationsCard = document.getElementById("starterExpectationsCard");
      const starterExpectationsBtn = document.getElementById("starterExpectationsBtn");

      if (starterExpectationsCard) {
        starterExpectationsCard.style.display = "none";
      }
      if (starterExpectationsBtn && starterExpectationsCard) {
        starterExpectationsBtn.addEventListener("click", () => {
          const hidden = starterExpectationsCard.style.display === "none";
          starterExpectationsCard.style.display = hidden ? "" : "none";
        });
      }

      function renderStarters() {
        if (!starterListEl) return;

        if (!Array.isArray(starters)) starters = [];

        if (!starters.length) {
          starterListEl.innerHTML =
            '<div class="list-empty">No starters yet. Create one above to see it here.</div>';
        } else {
          const items = starters
            .map((s) => {
              const starterFeeds = Array.isArray(feeds)
                ? feeds.filter((f) => f.starterId === s.id)
                : [];

              let feedHistoryHtml = "";
              if (starterFeeds.length) {
                const rows = starterFeeds
                  .slice()
                  .sort((a, b) => {
                    const at = a.timestamp || "";
                    const bt = b.timestamp || "";
                    return at.localeCompare(bt);
                  })
                  .reverse()
                  .map((f) => {
                    const when = f.timestamp ? new Date(f.timestamp).toLocaleString() : "";
                    const ratioText = f.ratio ? ` ¬∑ ${escapeHtml(f.ratio)}` : "";
                    const tempText = f.temp ? ` ¬∑ ${escapeHtml(f.temp)}¬∞C` : "";
                    const peakText = f.peakHours ? ` ¬∑ peak ~${escapeHtml(f.peakHours)}h` : "";
                    const notesText = f.notes
                      ? `<div class="feed-history-notes">${escapeHtml(f.notes).replace(/\n/g, "<br>")}</div>`
                      : "";
                    return `
              <div class="feed-history-item">
                <div class="feed-history-meta">${escapeHtml(when)}${ratioText}${tempText}${peakText}</div>
                ${notesText}
              </div>`;
                  })
                  .join("");

                feedHistoryHtml = `
              <details class="feed-history">
                <summary>Feed history (${starterFeeds.length})</summary>
                <div class="feed-history-list">
                  ${rows}
                </div>
              </details>`;
              } else {
                feedHistoryHtml =
                  '<div class="feed-history-empty muted-text">No feedings logged yet.</div>';
              }

              return `
              <div class="list-item">
                <div class="list-item-header">
                  <span>${escapeHtml(s.name || "Unnamed starter")}</span>
                  <span class="list-item-meta">${escapeHtml(s.originDate || "")}</span>
                </div>
                <div class="list-item-meta">
                  Hydration: ${s.hydration ? escapeHtml(s.hydration) + "%" : "‚Äì"} ‚Ä¢ Flour:
                  ${escapeHtml(s.flour || "‚Äì")}
                </div>
                ${
                  s.notes
                    ? `<div class="list-item-body">${escapeHtml(s.notes).replace(/\n/g, "<br>")}</div>`
                    : ""
                }
                ${feedHistoryHtml}
              </div>`;
            })
            .join("");
          starterListEl.innerHTML = `<div class="list-items">${items}</div>`;
        }

        const starterOptions =
          starters.length > 0
            ? '<option value="">Choose a starter</option>' +
              starters
                .map((s) => `<option value="${escapeAttr(s.id || "")}">${escapeAttr(s.name || "")}</option>`)
                .join("")
            : '<option value="">No starters yet</option>';

        if (feedStarterSelect) {
          feedStarterSelect.innerHTML = starterOptions;
        }
        if (bakeStarterSelect) {
          const base = '<option value="">No specific starter</option>';
          if (starters.length) {
            bakeStarterSelect.innerHTML =
              base +
              starters
                .map((s) => `<option value="${escapeAttr(s.id || "")}">${escapeAttr(s.name || "")}</option>`)
                .join("");
          } else {
            bakeStarterSelect.innerHTML = base;
          }
        }
      }

      if (starterSaveBtn) {
        starterSaveBtn.addEventListener("click", () => {
          const name = (starterNameInput && starterNameInput.value.trim()) || "";
          if (!name) {
            window.alert("Give your starter a name first.");
            return;
          }

          const starter = {
            id: Date.now().toString(),
            name,
            hydration: starterHydrationInput && starterHydrationInput.value.trim(),
            flour: starterFlourInput && starterFlourInput.value.trim(),
            originDate: starterOriginInput && starterOriginInput.value,
            notes: starterNotesInput && starterNotesInput.value.trim(),
          };

          starters.push(starter);
          saveJSON(STORAGE_KEYS.starters, starters);
          renderStarters();

          if (starterNameInput) starterNameInput.value = "";
          if (starterHydrationInput) starterHydrationInput.value = "";
          if (starterFlourInput) starterFlourInput.value = "";
          if (starterOriginInput) starterOriginInput.value = "";
          if (starterNotesInput) starterNotesInput.value = "";
        });
      }

      const feedRatioInput = document.getElementById("feedRatio");
      const feedTempInput = document.getElementById("feedTemp");
      const feedPeakTimeInput = document.getElementById("feedPeakTime");
      const feedNotesInput = document.getElementById("feedNotes");
      const feedSaveBtn = document.getElementById("feedSaveBtn");

      if (feedSaveBtn) {
        feedSaveBtn.addEventListener("click", () => {
          const starterId = feedStarterSelect && feedStarterSelect.value;
          if (!starterId) {
            window.alert("Choose a starter for this feeding.");
            return;
          }

          const entry = {
            id: Date.now().toString(),
            starterId,
            timestamp: new Date().toISOString(),
            ratio: feedRatioInput && feedRatioInput.value.trim(),
            temp: feedTempInput && feedTempInput.value.trim(),
            peakHours: feedPeakTimeInput && feedPeakTimeInput.value.trim(),
            notes: feedNotesInput && feedNotesInput.value.trim(),
          };

          if (!Array.isArray(feeds)) feeds = [];
          feeds.push(entry);
          saveJSON(STORAGE_KEYS.feeds, feeds);

          if (feedRatioInput) feedRatioInput.value = "";
          if (feedTempInput) feedTempInput.value = "";
          if (feedPeakTimeInput) feedPeakTimeInput.value = "";
          if (feedNotesInput) feedNotesInput.value = "";

          window.alert("Feeding saved under that starter.");
        });
      }

      const printStarterLogBtn = document.getElementById("printStarterLogBtn");
      if (printStarterLogBtn) {
        printStarterLogBtn.addEventListener("click", () => {
          window.print();
        });
      }

      const deepScienceBlock = document.getElementById("starterDeepScience");
      if (deepScienceBlock) {
        const header = deepScienceBlock.querySelector(".deep-science-header");
        const body = deepScienceBlock.querySelector(".deep-science-body");
        const icon = deepScienceBlock.querySelector(".deep-science-toggle-icon");
        if (body && header) {
          body.classList.remove("open");
          body.style.display = "none";
          header.addEventListener("click", () => {
            const isOpen = body.classList.contains("open");
            body.classList.toggle("open", !isOpen);
            body.style.display = isOpen ? "none" : "block";
            if (icon) icon.textContent = isOpen ? "‚ñº" : "‚ñ≤";
          });
        }
      }

      // ---------- Planner: formula + schedule with hover tips ----------
      const calculateFormulaBtn = document.getElementById("calculateFormulaBtn");
      const schedulePreview = document.getElementById("schedulePreview");
      const targetWeightInput = document.getElementById("targetWeight");
      const hydrationInput = document.getElementById("hydration");
      const saltPercentInput = document.getElementById("saltPercent");
      const levainPercentInput = document.getElementById("levainPercent");
      const flourBlendInput = document.getElementById("flourBlend");
      const ambientTempInput = document.getElementById("ambientTemp");

      function renderSchedulePreview(formula) {
        if (!schedulePreview) return;

        const {
          targetWeight,
          flour,
          water,
          salt,
          levainPercent,
          ambient,
          hydration,
          flourBlend,
        } = formula;

        const friendlyTemp =
          ambient != null && !isNaN(ambient) ? ambient.toFixed(1) + "¬∞C" : "room temp";

        schedulePreview.innerHTML = `
          <div class="muted-text" style="margin-bottom:0.7rem;">
            Based on <strong>${targetWeight.toFixed(0)} g</strong> dough at
            <strong>${hydration.toFixed(0)}%</strong> hydration and roughly ${friendlyTemp},
            here‚Äôs an approximate formula and flow:
          </div>
          <div class="muted-text" style="margin-bottom:0.7rem;">
            Flour: <strong>${flour.toFixed(0)} g</strong>
            &nbsp;&middot;&nbsp;
            Water: <strong>${water.toFixed(0)} g</strong>
            &nbsp;&middot;&nbsp;
            Salt: <strong>${salt.toFixed(0)} g</strong>
            ${
              levainPercent
                ? `&nbsp;&middot;&nbsp; Levain: <strong>${levainPercent.toFixed(
                    0
                  )}% of flour</strong>`
                : ""
            }
            ${
              flourBlend
                ? `<br><span class="muted-text">Flour blend: ${escapeHtml(flourBlend)}</span>`
                : ""
            }
          </div>

                    <div class="schedule-grid">
            <div class="schedule-row">
              <div class="schedule-time">Step 1</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="Autolyse is an early step where you mix flour and water before fermentation really gets going. It is basically a flour-and-water soak that jump-starts gluten development without kneading and lets the flour fully hydrate before you add salt and levain."
                  tabindex="0"
                >
                  Autolyse
                </div>
                <div class="schedule-detail">
                  Mix flour and water only. Cover and rest 30‚Äì60 minutes. Dough should feel smoother and less shaggy.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 2</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="Levain is a portion of your starter that you feed specifically for this bake; it is the mature, bubbly mix that drives fermentation. In this step you add your ripe levain and salt to the autolysed dough. The levain brings yeast and bacteria, while the salt strengthens gluten and slows fermentation slightly so you have a more controlled rise."
                  tabindex="0"
                >
                  Mix &amp; add levain + salt
                </div>
                <div class="schedule-detail">
                  Pinch and fold levain and salt into the dough until evenly distributed. Dough will feel stickier at
                  first, then tighten up.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 3</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="Bulk ferment is the main rise, where most gas, acidity, and flavor develop. Instead of chasing a precise number of hours, watch the dough: smoother texture, visible bubbles around the edges, and roughly a 30‚Äì60% rise usually signal it is ready to move on."
                  tabindex="0"
                >
                  Bulk ferment + folds
                </div>
                <div class="schedule-detail">
                  Let the dough rest in a warm spot. Perform gentle coil or stretch-&amp;-folds every 30‚Äì45 minutes for
                  the first 2‚Äì3 hours to build strength without tearing.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 4</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="Preshaping gathers the dough into a loose round or log to organize the gluten and redistribute gas. It makes final shaping easier and more even without committing to the final tight shape yet."
                  tabindex="0"
                >
                  Preshape
                </div>
                <div class="schedule-detail">
                  Turn dough out, lightly flour the surface, and tuck into a loose round. Aim for light tension without
                  tearing.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 5</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="Bench rest lets the dough relax after preshaping so gluten loosens just enough for a clean final shape. If it spreads completely flat, your dough may be too weak or too warm; if it does not relax at all, it may be under-fermented or too tight."
                  tabindex="0"
                >
                  Bench rest
                </div>
                <div class="schedule-detail">
                  Cover and rest 20‚Äì30 minutes. The dough should relax slightly but still hold some shape.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 6</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="Final shaping creates surface tension so the loaf rises upward instead of spreading out. A good shape balances strength and gentleness: too rough and you squeeze out gas, too timid and the loaf will pancake during proof or baking."
                  tabindex="0"
                >
                  Final shape
                </div>
                <div class="schedule-detail">
                  Shape into your chosen form (boule, batard, pan loaf). Use firm but gentle movements to create a
                  tight skin.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 7</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="A long, cool proof in the fridge slows fermentation, deepens flavor, and helps the loaf keep its shape. Over-proofed dough often feels extremely fragile and may collapse when you score it; under-proofed dough will feel tight and resist expansion."
                  tabindex="0"
                >
                  Cold proof (fridge)
                </div>
                <div class="schedule-detail">
                  Place shaped dough in a floured basket, cover, and refrigerate overnight or until well-proofed and
                  slightly jiggly.
                </div>
              </div>
            </div>

            <div class="schedule-row">
              <div class="schedule-time">Step 8 ‚Äì Bake day</div>
              <div>
                <div
                  class="schedule-label"
                  data-tooltip="A thoroughly preheated oven and baking surface give you oven spring and a strong crust. Steam in the first part of the bake keeps the crust flexible so the loaf can expand before it sets, then venting or removing the lid lets it crisp and color."
                  tabindex="0"
                >
                  Preheat &amp; bake
                </div>
                <div class="schedule-detail">
                  Preheat your oven and vessel for at least 30‚Äì45 minutes. Score the cold dough, bake with steam or lid
                  on, then finish uncovered until deep golden and crackling.
                </div>
              </div>
            </div>
          </div>
        `;
      }

      if (calculateFormulaBtn && schedulePreview) {
        calculateFormulaBtn.addEventListener("click", () => {
          const targetWeight = parseFloat(targetWeightInput && targetWeightInput.value) || 0;
          if (!targetWeight || targetWeight <= 0) {
            schedulePreview.textContent =
              "Please enter at least a target dough weight to generate a formula and schedule.";
            return;
          }
          const hydration =
            parseFloat(hydrationInput && hydrationInput.value) || 75; // %
          const saltPercent =
            parseFloat(saltPercentInput && saltPercentInput.value) || 2; // %
          const levainPercent =
            parseFloat(levainPercentInput && levainPercentInput.value) || 0; // % of flour
          const ambient = parseFloat(ambientTempInput && ambientTempInput.value);

          // Simple baker's math: target ‚âà flour + water + salt
          const flour = targetWeight / (1 + hydration / 100 + saltPercent / 100);
          const water = flour * (hydration / 100);
          const salt = flour * (saltPercent / 100);
          const flourBlend = flourBlendInput && flourBlendInput.value.trim();

          renderSchedulePreview({
            targetWeight,
            flour,
            water,
            salt,
            levainPercent,
            ambient,
            hydration,
            flourBlend,
          });
        });
      }

      // ---------- Bake log (unlimited) ----------
      let bakes = loadJSON(STORAGE_KEYS.bakes, []);

      const bakeSaveBtn = document.getElementById("bakeSaveBtn");
      const bakeListEl = document.getElementById("bakeList");

      const bakeNameInput = document.getElementById("bakeName");
      const bakeDateInput = document.getElementById("bakeDate");
      // reuse existing bakeStarterSelect defined above


      const bakeDoughWeightInput = document.getElementById("bakeDoughWeight");
      const bakeHydrationInput = document.getElementById("bakeHydration");
      const bakeSaltPercentInput = document.getElementById("bakeSaltPercent");
      const bakeLevainPercentInput = document.getElementById("bakeLevainPercent");

      const bakeAmbientTempInput = document.getElementById("bakeAmbientTemp");
      const bakeBulkHoursInput = document.getElementById("bakeBulkHours");
      const bakeFoldsInput = document.getElementById("bakeFolds");
      const bakeFoldMethodSelect = document.getElementById("bakeFoldMethod");
      const bakeBulkNotesInput = document.getElementById("bakeBulkNotes");

      const bakeProofMethodSelect = document.getElementById("bakeProofMethod");
      const bakeProofHoursInput = document.getElementById("bakeProofHours");
      const bakeProofTempInput = document.getElementById("bakeProofTemp");
      const bakeVesselSelect = document.getElementById("bakeVessel");

      const bakePreheatTempInput = document.getElementById("bakePreheatTemp");
      const bakeBakeTempInput = document.getElementById("bakeBakeTemp");
      const bakeCoveredMinutesInput = document.getElementById("bakeCoveredMinutes");
      const bakeUncoveredMinutesInput = document.getElementById("bakeUncoveredMinutes");
      const bakeSteamMethodInput = document.getElementById("bakeSteamMethod");
      const bakeBakeNotesInput = document.getElementById("bakeBakeNotes");

      const bakeCrumbInput = document.getElementById("bakeCrumb");
      const bakeCrustInput = document.getElementById("bakeCrust");
      const bakeSournessInput = document.getElementById("bakeSourness");
      const bakeOverallInput = document.getElementById("bakeOverall");
      const bakeNotesInput = document.getElementById("bakeNotes");

      function renderBakes() {
        if (!bakeListEl) return;

        if (!Array.isArray(bakes)) bakes = [];

        if (!bakes.length) {
          bakeListEl.className = "list-empty";
          bakeListEl.textContent = "No bakes saved yet. Log one above to start your history.";
          return;
        }

        bakeListEl.className = "list-items";
        bakeListEl.innerHTML = bakes
          .slice()
          .reverse()
          .map((b) => {
            const metaBits = [];
            if (b.doughWeight) metaBits.push(`${b.doughWeight} g`);
            if (b.hydration) metaBits.push(`${b.hydration}% hydration`);
            if (b.ambientTemp) metaBits.push(`${b.ambientTemp}¬∞C ambient`);
            const meta = metaBits.join(" ‚Ä¢ ");

            const ratings = [];
            if (b.crumb) ratings.push(`Crumb ${b.crumb}/5`);
            if (b.crust) ratings.push(`Crust ${b.crust}/5`);
            if (b.sourness) ratings.push(`Sourness ${b.sourness}/5`);
            if (b.overall) ratings.push(`Overall ${b.overall}/5`);
            const ratingText = ratings.join(" ‚Ä¢ ");

            return `
              <div class="list-item">
                <div class="list-item-header">
                  <span>${escapeHtml(b.name || "Unnamed bake")}</span>
                  <span class="list-item-meta">${escapeHtml(b.date || "")}</span>
                </div>
                ${
                  meta
                    ? `<div class="list-item-meta">${escapeHtml(meta)}</div>`
                    : ""
                }
                ${
                  ratingText
                    ? `<div class="list-item-meta">${escapeHtml(ratingText)}</div>`
                    : ""
                }
                ${
                  b.notes
                    ? `<div class="list-item-body">${escapeHtml(b.notes).replace(/\n/g, "<br>")}</div>`
                    : ""
                }
              </div>
            `;
          })
          .join("");
      }

      if (bakeSaveBtn) {
        bakeSaveBtn.addEventListener("click", () => {
          const name = (bakeNameInput && bakeNameInput.value.trim()) || "";
          const date = bakeDateInput && bakeDateInput.value;
          if (!name) {
            window.alert("Give this bake a name so you can find it later.");
            return;
          }

          const bake = {
            id: Date.now().toString(),
            name,
            date,
            starterId: bakeStarterSelect && bakeStarterSelect.value,
            doughWeight: bakeDoughWeightInput && bakeDoughWeightInput.value.trim(),
            hydration: bakeHydrationInput && bakeHydrationInput.value.trim(),
            saltPercent: bakeSaltPercentInput && bakeSaltPercentInput.value.trim(),
            levainPercent: bakeLevainPercentInput && bakeLevainPercentInput.value.trim(),
            ambientTemp: bakeAmbientTempInput && bakeAmbientTempInput.value.trim(),
            bulkHours: bakeBulkHoursInput && bakeBulkHoursInput.value.trim(),
            folds: bakeFoldsInput && bakeFoldsInput.value.trim(),
            foldMethod: bakeFoldMethodSelect && bakeFoldMethodSelect.value,
            bulkNotes: bakeBulkNotesInput && bakeBulkNotesInput.value.trim(),
            proofMethod: bakeProofMethodSelect && bakeProofMethodSelect.value,
            proofHours: bakeProofHoursInput && bakeProofHoursInput.value.trim(),
            proofTemp: bakeProofTempInput && bakeProofTempInput.value.trim(),
            vessel: bakeVesselSelect && bakeVesselSelect.value,
            preheatTemp: bakePreheatTempInput && bakePreheatTempInput.value.trim(),
            bakeTemp: bakeBakeTempInput && bakeBakeTempInput.value.trim(),
            coveredMinutes: bakeCoveredMinutesInput && bakeCoveredMinutesInput.value.trim(),
            uncoveredMinutes: bakeUncoveredMinutesInput && bakeUncoveredMinutesInput.value.trim(),
            steamMethod: bakeSteamMethodInput && bakeSteamMethodInput.value.trim(),
            bakeNotes: bakeBakeNotesInput && bakeBakeNotesInput.value.trim(),
            crumb: bakeCrumbInput && bakeCrumbInput.value.trim(),
            crust: bakeCrustInput && bakeCrustInput.value.trim(),
            sourness: bakeSournessInput && bakeSournessInput.value.trim(),
            overall: bakeOverallInput && bakeOverallInput.value.trim(),
            notes: bakeNotesInput && bakeNotesInput.value.trim(),
          };

          if (!Array.isArray(bakes)) bakes = [];
          bakes.push(bake);
          saveJSON(STORAGE_KEYS.bakes, bakes);
          renderBakes();

          // Light reset of core fields
          [
            bakeNameInput,
            bakeDateInput,
            bakeDoughWeightInput,
            bakeHydrationInput,
            bakeSaltPercentInput,
            bakeLevainPercentInput,
            bakeAmbientTempInput,
            bakeBulkHoursInput,
            bakeFoldsInput,
            bakeBulkNotesInput,
            bakeProofHoursInput,
            bakeProofTempInput,
            bakePreheatTempInput,
            bakeBakeTempInput,
            bakeCoveredMinutesInput,
            bakeUncoveredMinutesInput,
            bakeSteamMethodInput,
            bakeBakeNotesInput,
            bakeCrumbInput,
            bakeCrustInput,
            bakeSournessInput,
            bakeOverallInput,
            bakeNotesInput,
          ].forEach((el) => {
            if (el) el.value = "";
          });
        });
      }

      // ---------- Journal ----------
      let journalEntries = loadJSON(STORAGE_KEYS.journal, []);
      const journalTitleInput = document.getElementById("journalTitle");
      const journalDateInput = document.getElementById("journalDate");
      const journalStoryInput = document.getElementById("journalStory");
      const journalSaveBtn = document.getElementById("journalSaveBtn");
      const journalListEl = document.getElementById("journalList");

      function renderJournal() {
        if (!journalListEl) return;

        if (!Array.isArray(journalEntries)) journalEntries = [];

        if (!journalEntries.length) {
          journalListEl.className = "list-empty";
          journalListEl.textContent = "No entries yet. Start by saving one above.";
          return;
        }

        journalListEl.className = "list-items";
        journalListEl.innerHTML = journalEntries
          .slice()
          .reverse()
          .map((entry) => {
            return `
              <div class="list-item">
                <div class="list-item-header">
                  <span>${escapeHtml(entry.title || "Untitled entry")}</span>
                  <span class="list-item-meta">${escapeHtml(entry.date || "")}</span>
                </div>
                ${
                  entry.story
                    ? `<div class="list-item-body">${escapeHtml(entry.story).replace(/\n/g, "<br>")}</div>`
                    : ""
                }
              </div>
            `;
          })
          .join("");
      }

      if (journalSaveBtn) {
        journalSaveBtn.addEventListener("click", () => {
          const title = (journalTitleInput && journalTitleInput.value.trim()) || "";
          const date = journalDateInput && journalDateInput.value;
          const story = journalStoryInput && journalStoryInput.value.trim();

          if (!title && !story) {
            window.alert("Add at least a title or a story before saving.");
            return;
          }

          const entry = {
            id: Date.now().toString(),
            title,
            date,
            story,
          };

          if (!Array.isArray(journalEntries)) journalEntries = [];
          journalEntries.push(entry);
          saveJSON(STORAGE_KEYS.journal, journalEntries);
          renderJournal();

          if (journalTitleInput) journalTitleInput.value = "";
          if (journalDateInput) journalDateInput.value = "";
          if (journalStoryInput) journalStoryInput.value = "";
        });
      }

      // ---------- Family recipes ----------
      let familyRecipes = loadJSON(STORAGE_KEYS.family, []);
      const familyTitleInput = document.getElementById("familyTitle");
      const familyAttributionInput = document.getElementById("familyAttribution");
      const familyStoryInput = document.getElementById("familyStory");
      const familySaveBtn = document.getElementById("familySaveBtn");
      const familyListEl = document.getElementById("familyList");

      function renderFamilyRecipes() {
        if (!familyListEl) return;

        if (!Array.isArray(familyRecipes)) familyRecipes = [];

        if (!familyRecipes.length) {
          familyListEl.className = "list-empty";
          familyListEl.textContent = "No recipes saved yet. Add one above to pin it in place.";
          return;
        }

        familyListEl.className = "list-items";
        familyListEl.innerHTML = familyRecipes
          .slice()
          .reverse()
          .map((r) => {
            return `
              <div class="list-item">
                <div class="list-item-header">
                  <span>${escapeHtml(r.title || "Untitled recipe")}</span>
                  <span class="list-item-meta">${escapeHtml(r.attribution || "")}</span>
                </div>
                ${
                  r.story
                    ? `<div class="list-item-body">${escapeHtml(r.story).replace(/\n/g, "<br>")}</div>`
                    : ""
                }
              </div>
            `;
          })
          .join("");
      }

      if (familySaveBtn) {
        familySaveBtn.addEventListener("click", () => {
          const title = (familyTitleInput && familyTitleInput.value.trim()) || "";
          const attribution = familyAttributionInput && familyAttributionInput.value.trim();
          const story = familyStoryInput && familyStoryInput.value.trim();

          if (!title && !story) {
            window.alert("Add at least a name or some notes before saving.");
            return;
          }

          const recipe = {
            id: Date.now().toString(),
            title,
            attribution,
            story,
          };

          if (!Array.isArray(familyRecipes)) familyRecipes = [];
          familyRecipes.push(recipe);
          saveJSON(STORAGE_KEYS.family, familyRecipes);
          renderFamilyRecipes();

          if (familyTitleInput) familyTitleInput.value = "";
          if (familyAttributionInput) familyAttributionInput.value = "";
          if (familyStoryInput) familyStoryInput.value = "";
        });
      }

      // ---------- Initial renders ----------
      renderStarters();
      renderBakes();
      renderJournal();
      renderFamilyRecipes();
    })();
  </script>
  <!-- ===================== END: APP SCRIPT ===================== -->
</body>
</html>
